package tech.projectmatris.antimalwareapp.activities;

import android.app.ProgressDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.text.TextUtils;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

import androidx.appcompat.app.AppCompatActivity;

import tech.projectmatris.antimalwareapp.R;

public class Signup extends AppCompatActivity {
    EditText cid, cname, cnadd, cmob, cbname, cabtype, cbdetail;
    Button b1;
    TestAdapter adapter;
    String id,name,add,mob,bname;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_signup);
        b1=(Button)findViewById(R.id.btn_csubmit);
        cid = (EditText) findViewById(R.id.txt_cid);
        cname = (EditText) findViewById(R.id.txt_cname);
        cnadd = (EditText) findViewById(R.id.txt_cadd);
        cmob = (EditText) findViewById(R.id.mymobile);
        cbname = (EditText) findViewById(R.id.txt_cbus);


        b1 = (Button) findViewById(R.id.btn_csubmit);

        try {

            adapter = new TestAdapter(this);
            adapter.createDatabase();
            adapter.open();

            b1.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {

                    id=cid.getText().toString();
                    name=cname.getText().toString();
                    add=cnadd.getText().toString();
                    mob=cmob.getText().toString();
                    bname=cbname.getText().toString();

                    if (TextUtils.isEmpty(name)) {
                        Toast.makeText(getApplicationContext(), "Please Enter  Name..", Toast.LENGTH_SHORT).show();
                        return;
                    }

                    if (TextUtils.isEmpty(add)) {
                        Toast.makeText(getApplicationContext(), "Please Enter Address..", Toast.LENGTH_SHORT).show();
                        return;
                    }

                    if (TextUtils.isEmpty(mob)) {
                        Toast.makeText(getApplicationContext(), "Please Enter  Mobile Number..", Toast.LENGTH_SHORT).show();
                        return;
                    }

                    if (TextUtils.isEmpty(bname)) {
                        Toast.makeText(getApplicationContext(), "Please Enter Password..", Toast.LENGTH_SHORT).show();
                        return;
                    }
                    else{
                           adduser();
                    }

                    long i=adapter.CustomerSignup(id,name,add,mob,bname);
                 //   Toast.makeText(getApplicationContext(),"User" +"Registration Sucessfully.." +i,Toast.LENGTH_SHORT).show();

                }
            });

        } catch (Exception e) {
        }
    }

    private void adduser() {
        final ProgressDialog dialog =
                new ProgressDialog(Signup.this);
       // dialog.setIcon(R.drawable.alert);
        dialog.setTitle("Processing Your Request...");
        dialog.setMessage("Please wait...");
        dialog.show();

        //long i = adapter.InsertComplaint(num, cdate, name, station, assuced, complaint, address, age, adhar, mobile, relation);
        //Toast.makeText(getApplicationContext(), "Complaint Register Sucessfully..." , Toast.LENGTH_SHORT).show();

        final Runnable progressRunnable = new Runnable() {

            @Override
            public void run() {
                dialog.cancel();
                String mpass = null;

                final android.app.AlertDialog.Builder alertDialogBuilder = new android.app.AlertDialog.Builder(Signup.this);
                // alertDialogBuilder.setIcon(R.drawable.ic_credit_card_black_24dp);
                alertDialogBuilder.setTitle("Signup Sucessfully...");
                // alertDialogBuilder.setMessage("No Any Card Added ..");
                final android.app.AlertDialog alertDialog = alertDialogBuilder.create();
                alertDialogBuilder.setPositiveButton("Ok.",
                        new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface arg0, int arg1) {
                                Intent i = new Intent(Signup.this, LoginActivity.class);
                                startActivity(i);

                            }
                        });
                android.app.AlertDialog alDialog = alertDialogBuilder.create();
                alDialog.show();

            }
        };


        Handler pdCanceller = new Handler();
        pdCanceller.postDelayed(progressRunnable, 6000);
    }
}